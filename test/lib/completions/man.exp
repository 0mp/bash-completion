proc setup {} {
    assert_bash_exec {export MANPATH=$TESTDIR/fixtures/man}
    save_env
}


proc teardown {} {
    assert_env_unmodified
}


setup


assert_complete "bar" "man b"


sync_after_int


assert_complete "fixtures/man/man1/foo.1" "man fixtures/man/man1/f"


sync_after_int


assert_complete "Bash::Completion" "man Bash::C"


sync_after_int


teardown
